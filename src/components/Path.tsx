import React, { useEffect, useRef } from "react";

const items = [
  {
    icon: "üéì",
    title: "2 –¥–∏–ø–ª–æ–º–∞",
    desc: "–ë—É—Ö–≥–∞–ª—Ç–µ—Ä, –º–µ–Ω–µ–¥–∂–µ—Ä –ø–æ —Ç—É—Ä–∏–∑–º—É",
    tag: "–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ",
  },
  {
    icon: "üèÖ",
    title: "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã",
    desc: "–°–∏–ª–∞ –ø—Ä–æ–¥–∞–∂, –ø—É–±–ª–∏—á–Ω—ã–µ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è, –ú–∞—Å—Ç–µ—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è",
    tag: "–†–∞–∑–≤–∏—Ç–∏–µ",
  },
  {
    icon: "üèõÔ∏è",
    title: "–ö—É—Ä–∞—Ç–æ—Ä—Å—Ç–≤–æ –∏ –∫–ª—É–±—ã",
    desc: '–ö—É—Ä–∞—Ç–æ—Ä –Ω–∞ –∫—É—Ä—Å–µ, —É—á–∞—Å—Ç–∏–µ –≤ –∫–ª—É–±–µ "–ö–æ–º–ø–∞—Å –ª–∏–¥–µ—Ä–∞"',
    tag: "–ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ",
  },
  {
    icon: "üìö",
    title: "1‚Äì2 –∫–Ω–∏–≥–∏ –≤ –º–µ—Å—è—Ü",
    desc: "–ì–ª—É–±–æ–∫–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—É—é –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—É",
    tag: "–ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —á—Ç–µ–Ω–∏–µ",
  },
  {
    icon: "üß†",
    title: "–ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ",
    desc: "–ö–æ—É—á–∏–Ω–≥, –º–µ–Ω—Ç–æ—Ä–∏–Ω–≥, —Ç–µ—Ä–∞–ø–∏—è —Å –ø—Å–∏—Ö–æ–ª–æ–≥–æ–º, —Ä–∞–∑–≤–∏—Ç–∏–µ —Å –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–æ–º",
    tag: "–õ–∏—á–Ω–æ—Å—Ç–Ω—ã–π —Ä–æ—Å—Ç",
  },
  {
    icon: "üíº",
    title: "–°–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞",
    desc: "–†–∞–∑—Ä–∞–±–æ—Ç–∞–ª–∞ —Å–∏—Å—Ç–µ–º—É –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∏ —Ä–∞–∑–≤–∏—Ç–∏—è –∫–æ–º–∞–Ω–¥—ã",
    tag: "–≠–∫—Å–ø–µ—Ä—Ç–Ω–æ—Å—Ç—å",
  },
];

export const Path: React.FC = () => {
  const ref = useRef<HTMLDivElement | null>(null);

  useEffect(() => {
    const items = ref.current?.querySelectorAll(".timeline-item");
    if (!items) return;

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("visible");
          }
        });
      },
      { threshold: 0.2 }
    );

    items.forEach((item) => observer.observe(item));
    return () => observer.disconnect();
  }, []);

  return (
    <section id="path">
      <h2>–ú–æ–π –ø—É—Ç—å</h2>
      <div className="path-title">
        <p style={{ textAlign: "center" }}>
          "–ú–æ–π –ø—É—Ç—å ‚Äî —ç—Ç–æ –ø–∞–∑–ª, —Å–æ–±—Ä–∞–Ω–Ω—ã–π –∏–∑ —Ä–µ—à–µ–Ω–∏–π, –≤—Å—Ç—Ä–µ—á –∏ —É—Ä–æ–∫–æ–≤. –ö–∞—Ä—Ç–∏–Ω–∞
          –µ—â—ë –Ω–µ –∑–∞–∫–æ–Ω—á–µ–Ω–∞, –Ω–æ –µ—ë –æ—á–µ—Ä—Ç–∞–Ω–∏—è —É–∂–µ —Ä–∞–¥—É—é—Ç."
        </p>
        <p style={{ textAlign: "center" }}>
          –ú–æ–π –ø—Ä–∏–Ω—Ü–∏–ø: –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ —á–µ—Ä–µ–∑ –æ–±—É—á–µ–Ω–∏–µ —É —Å–∏–ª—å–Ω–µ–π—à–∏—Ö
          —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ –∏ –≥–ª—É–±–æ–∫–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—É—é –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—É.
        </p>
      </div>

      <div className="timeline" ref={ref}>
        {items.map((item, i) => (
          <div
            key={i}
            className={`timeline-item ${i % 2 === 0 ? "left" : "right"}`}
          >
            <div className="item-content">
              <i>{item.icon}</i>
              <h3>{item.title}</h3>
              <p>{item.desc}</p>
              <span className="tag">{item.tag}</span>
            </div>
          </div>
        ))}
      </div>
    </section>
  );
};
